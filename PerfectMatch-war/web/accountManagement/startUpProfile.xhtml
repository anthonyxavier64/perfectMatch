<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../template/defTemplate.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

   <ui:define name="content">
        <f:facet name="header">
            #{sessionScope.currentStartUp.companyName}'s Profile Page
        </f:facet>
        <h:form >
            <p:panelGrid>

                <p:row>
                    <p:column>
                        <h:outputLabel value="Profile Picture: " />
                    </p:column>
                    <p:column>
                        <h:graphicImage library="images"
                                        name="#{sessionScope.startUpProfilePicture}"
                                        alt="profilePicture"
                                        style="max-height: 50px"/>
                    </p:column>
                    <p:commandButton title="Update Profile Picture"
                                     style="text-align: center;">
                        <p:dialog id="dialogUpdateProfilePicture"
                                  widgetVar="dialogUpdateProfilePicture"
                                  header="Update Profile Picture"
                                  closable="true"
                                  width="500px">
                            <h:form id="formProfilePictureUpdate" enctype="multipart/form-data">
                                <p:fileUpload listener="#{profilePictureManagedBean.handleFileUpload}" 
                                              allowTypes="/(\.|\/)(jpe?g|png)$/" />
                            </h:form>
                        </p:dialog>
                    </p:commandButton>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="startupRegistrationNum" value="StartUp Registration Number: " style="font-weight: bold;"  />
                    </p:column>
                    <p:column>
                        <h:inputText id="startupRegistrationNum" value="#{startupManagementManagedBean.currentStartUp.startupRegistrationNum}" />
                    </p:column>
                    <p:column>
                        <p:message for="startupRegistrationNum" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="companyName" value="Company Name: " style="font-weight: bold;"   />
                    </p:column>
                    <p:column>
                        <h:inputText id="companyName" value="#{startupManagementManagedBean.currentStartUp.companyName}" />
                    </p:column>
                    <p:column>
                        <p:message for="companyName" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="description" value="Description: " style="font-weight: bold;"   />
                    </p:column>
                    <p:column>
                        <h:inputText id="description" value="#{startupManagementManagedBean.currentStartUp.description}" />
                    </p:column>
                    <p:column>
                        <p:message for="description" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="email" value="Email: " style="font-weight: bold;"   />
                    </p:column>
                    <p:column>
                        <h:inputText id="email" value="#{startupManagementManagedBean.currentStartUp.email}" />
                    </p:column>
                    <p:column>
                        <p:message for="email" />
                    </p:column>
                </p:row>

                <!--For Password, create a dialog to verify old pw before changing to new one -->
                <p:row>
                    <!--Password updater placeholder-->
                    <!--                    <p:column>
                                            <h:outputLabel for="email" value="Email: " style="font-weight: bold;" />
                                        </p:column>
                                        <p:column>
                                            <h:outputText id="email" value="#{startupManagementManagedBean.currentStartUp.email}" />
                                        </p:column>
                                        <p:column>
                                            <p:message for="email" />
                                        </p:column>-->
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="selIndustry" value="Industry: " style="font-weight: bold;"   />
                    </p:column>
                    <p:column>
                        <p:selectOneMenu id="selIndustry" value="#{startupManagementManagedBean.updateIndustry}">
                            <f:selectItem itemValue="0" itemLabel="[Select One]" noSelectionOption="true" />
                            <f:selectItems value="#{startupManagementManagedBean.industries}" var="industry" itemValue="#{industry}" itemLabel="#{industry}" />
                        </p:selectOneMenu>
                    </p:column>
                    <p:column>
                        <p:message for="selIndustry" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column>
                        <h:outputLabel for="selStartupLocation" value="StartUp Location: " style="font-weight: bold;"  />
                    </p:column>
                    <p:column>
                        <p:selectOneMenu id="selStartupLocation" value="#{startupManagementManagedBean.updateLocation}">
                            <f:selectItem itemValue="0" itemLabel="[Select One]" noSelectionOption="true" />
                            <f:selectItems value="#{startupManagementManagedBean.startUpLocations}" var="startUpLocation" itemValue="#{startUpLocation}" itemLabel="#{startUpLocation}" />
                        </p:selectOneMenu>
                    </p:column>
                    <p:column>
                        <p:message for="selStartupLocation" />
                    </p:column>
                </p:row>

                <p:row>
                    <p:column colspan="3">
                        <p:commandButton type="reset" value="Clear" />&nbsp;
                        <p:commandButton  value="Update StartUp Profile" update="@form" actionListener="#{startupManagementManagedBean.updateStartUp}" />
                    </p:column>
                </p:row>

            </p:panelGrid>

        </h:form>
    </ui:define>

</ui:composition>
